
(defpoll volume_percent :interval "0.05s" "scripts/get-volume")

(defwidget volume_widget []
  (eventbox :onscroll "[[ {} == 'up' ]] && wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+ || wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-"
            :onclick "pavucontrol && disown"
            :onrightclick "wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle"
    (box :class "volume-box"
      (label :text {volume_percent == "MUTED" ? "󰝟 muted" : "󰕾 ${volume_percent}"}))))

